<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import ru.trader.view.support.cells.PriceCellImpl?>
<?import ru.trader.view.support.cells.OfferCellValueImpl?>

<?import ru.trader.view.support.cells.DoubleCell?>
<HBox xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1"
          fx:controller="ru.trader.controllers.OffersController">
    <TitledPane text="%market.vendors" minWidth="250" prefHeight="510" collapsible="false">
        <ListView fx:id="vendors" />
    </TitledPane>

    <Accordion HBox.hgrow="ALWAYS">
      <panes>
          <TitledPane fx:id="sells" animated="false" text="%offers.pane.sell">
              <TableView fx:id="tblSell" editable="true">
                  <columns>
                      <TableColumn minWidth="230.0" text="%market.item.name">
                          <cellValueFactory><PropertyValueFactory property="name"/></cellValueFactory>
                      </TableColumn>
                      <TableColumn minWidth="110.0" text="%market.offer.price" onEditCommit="#editPrice">
                          <cellFactory><PriceCellImpl/></cellFactory>
                          <cellValueFactory><PropertyValueFactory property="price"/></cellValueFactory>
                      </TableColumn>
                      <TableColumn fx:id="sortSell" minWidth="90.0" text="%market.order.profit" sortType="DESCENDING">
                          <cellFactory><DoubleCell/></cellFactory>
                          <cellValueFactory><PropertyValueFactory property="profit"/></cellValueFactory>
                      </TableColumn>
                      <TableColumn text="%market.offer.avg">
                        <columns>
                            <TableColumn minWidth="80.0" text="%market.offer.sell">
                                <cellFactory><DoubleCell/></cellFactory>
                                <cellValueFactory><PropertyValueFactory property="avgSell"/></cellValueFactory>
                            </TableColumn>
                            <TableColumn minWidth="80.0" text="%market.offer.buy">
                                <cellFactory><DoubleCell/></cellFactory>
                                <cellValueFactory><PropertyValueFactory property="avgBuy"/></cellValueFactory>
                            </TableColumn>
                        </columns>
                      </TableColumn>
                      <TableColumn text="%market.offer.best">
                        <columns>
                            <TableColumn minWidth="120.0" text="%market.offer.sell">
                                <cellValueFactory><OfferCellValueImpl property="bestSell"/></cellValueFactory>
                            </TableColumn>
                            <TableColumn minWidth="120.0" text="%market.offer.buy">
                                <cellValueFactory><OfferCellValueImpl property="bestBuy"/></cellValueFactory>
                            </TableColumn>
                        </columns>
                      </TableColumn>
                  </columns>
                  <columnResizePolicy>
                      <TableView fx:constant="UNCONSTRAINED_RESIZE_POLICY"/>
                  </columnResizePolicy>
                  <sortOrder>
                      <fx:reference source="sortSell"/>
                  </sortOrder>
              </TableView>
          </TitledPane>
          <TitledPane animated="false" text="%offers.pane.buy">
              <TableView fx:id="tblBuy" editable="true">
                  <columns>
                      <TableColumn minWidth="230.0" text="%market.item.name">
                          <cellValueFactory><PropertyValueFactory property="name"/></cellValueFactory>
                      </TableColumn>
                      <TableColumn minWidth="110.0" text="%market.offer.price" editable="true" onEditCommit="#editPrice">
                          <cellFactory><PriceCellImpl/></cellFactory>
                          <cellValueFactory><PropertyValueFactory property="price"/></cellValueFactory>
                      </TableColumn>
                      <TableColumn fx:id="sortBuy" minWidth="90.0" text="%market.order.profit" sortType="DESCENDING">
                          <cellFactory><DoubleCell/></cellFactory>
                          <cellValueFactory><PropertyValueFactory property="profit"/></cellValueFactory>
                      </TableColumn>
                      <TableColumn text="%market.offer.avg">
                          <columns>
                              <TableColumn minWidth="80.0" text="%market.offer.sell">
                                  <cellFactory><DoubleCell/></cellFactory>
                                  <cellValueFactory><PropertyValueFactory property="avgSell"/></cellValueFactory>
                              </TableColumn>
                              <TableColumn minWidth="80.0" text="%market.offer.buy">
                                  <cellFactory><DoubleCell/></cellFactory>
                                  <cellValueFactory><PropertyValueFactory property="avgBuy"/></cellValueFactory>
                              </TableColumn>
                          </columns>
                      </TableColumn>
                      <TableColumn text="%market.offer.best">
                          <columns>
                              <TableColumn minWidth="120.0" text="%market.offer.sell">
                                  <cellValueFactory><OfferCellValueImpl property="bestSell"/></cellValueFactory>
                              </TableColumn>
                              <TableColumn minWidth="120.0" text="%market.offer.buy">
                                  <cellValueFactory><OfferCellValueImpl property="bestBuy"/></cellValueFactory>
                              </TableColumn>
                          </columns>
                      </TableColumn>
                  </columns>
                  <columnResizePolicy>
                      <TableView fx:constant="UNCONSTRAINED_RESIZE_POLICY"/>
                  </columnResizePolicy>
                  <sortOrder>
                      <fx:reference source="sortBuy"/>
                  </sortOrder>
              </TableView>
          </TitledPane>
      </panes>
      <expandedPane>
          <fx:reference source="sells"/>
      </expandedPane>
    </Accordion>
</HBox>
